function validarSoloNumeros(e){$.inArray(e.keyCode,[46,8,9,27,13,110])!==-1||65===e.keyCode&&(e.ctrlKey===!0||e.metaKey===!0)||e.keyCode>=35&&e.keyCode<=40||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}function clearFileInput(e){if(""!=e.val())if(/MSIE/.test(navigator.userAgent)){var o=e.closest("form");if(o.length){e.wrap("<form>");var a=e.closest("form"),i=$(document.createElement("div"));a.before(i).after(o).trigger("reset"),e.unwrap().appendTo(i).unwrap()}else e.wrap("<form>").closest("form").trigger("reset").unwrap()}else e.val("")}var extensionFile=null,file=null,archivosAdmitidos=["video/mp4","video/ogg","video/webm"];$(document).ready(function(){$(".js-participa-aqui").on("click",function(e){e.preventDefault();var o=$(".active");return!o.hasClass("page-registro")&&(o.removeClass("active"),o.css("display","none"),$(".page-registro").css("display","block"),void $(".page-registro").addClass("active"))}),$(".terminos-trigger").on("click",function(e){e.preventDefault();var o=$(".active");return!o.hasClass("modal")&&(o.removeClass("active"),o.css("display","none"),$(".modal").css("display","block"),void $(".modal").addClass("active"))}),$(".js-terminos-y-condiciones").on("click",function(e){e.preventDefault();var o=$(".active");return!o.hasClass("modal")&&(o.removeClass("active"),o.css("display","none"),$(".modal").css("display","block"),void $(".modal").addClass("active"))}),$(".aviso-trigger").on("click",function(e){e.preventDefault();var o=$(".active");return!o.hasClass("modal")&&(o.removeClass("active"),o.css("display","none"),$(".modal").css("display","block"),void $(".modal").addClass("active"))}),$(".js-premios").on("click",function(e){e.preventDefault();var o=$(".active");return!o.hasClass("page-premios")&&(o.removeClass("active"),o.css("display","none"),$(".page-premios").css("display","block"),void $(".page-premios").addClass("active"))}),$("#entusuarios-txt_telefono_celular").keydown(function(e){validarSoloNumeros(e)}),$("#entusuarios-repeatcelular").keydown(function(e){validarSoloNumeros(e)}),$("#entusuarios-txt_telefono_casa").keydown(function(e){validarSoloNumeros(e)}),$("#entusuarios-txt_cp").keydown(function(e){validarSoloNumeros(e)}),$("#js-boton-subir-video").on("click",function(e){e.preventDefault(),$("#entusuarios-video").trigger("click")}),$("#entusuarios-video").on("change",function(){var e=Ladda.create(document.getElementById("js-boton-subir-video"));e.start(),file=this.files[0];var o=$(this).val();if("fakepath"==o.substring(3,11)&&(o=o.substring(12),$("#js-archivo-agregado").html(o)),extensionFile=file.type,extensionFile!=archivosAdmitidos[0]&&extensionFile!=archivosAdmitidos[1]&&extensionFile!=archivosAdmitidos[2])return swal("Espera","Archivo no admitido por el sistema","warning"),$("#container-video-viewer").html(""),clearFileInput($(this)),e.stop(),$("#js-archivo-agregado").html(""),!1;var a=new FileReader;a.onloadstart=viewer.start,a.onloadend=viewer.end,a.readAsDataURL(file),viewer.setProperties(file)}),$("#guardar-registro").on("click",function(e){return e.preventDefault(),$("#entusuarios-video").val()||swal("Espera","Necesitas agregar tu foto","warning"),$("#entusuarios-leido").prop("checked")?void $("form").submit():(swal("Espera","Debes de aceptar los términos ycondiciones así como el aviso de privacidad","warning"),!1)})});var viewer={start:function(e){$("#container-video-viewer").html("Cargando video.....")},end:function(e){var o=Ladda.create(document.getElementById("js-boton-subir-video"));o.stop(),$("#container-video-viewer").html("Foto Cargada.....");var a=URL.createObjectURL(file);$("#container-video-viewer").html('<video id="video-viewer" controls><source id="video-source" src='+a+' type="'+extensionFile+'"></video>')},setProperties:function(e){}};$("body").on("beforeSubmit","form",function(){var e=$(this),o=Ladda.create(document.getElementById("guardar-registro"));return o.start(),e.find(".has-error").length?(o.stop(),!1):($.ajax({url:"site/guardar-informacion",type:"post",data:new FormData(this),dataType:"json",cache:!1,contentType:!1,processData:!1,success:function(e){swal("Registro exitoso","Nos comunicaremos contigo en caso de ser el ganador","success"),document.getElementById("form-registro").reset(),$("#container-video-viewer").html(""),$("#js-archivo-agregado").html(""),o.stop()},error:function(){},statusCode:{404:function(){alert("page not found")}}}),!1)});